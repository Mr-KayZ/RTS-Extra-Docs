---
layout: default
title: WHEA-Analysis - How to analyze a WHEA report
nav_exclude: false
has_children: false
parent: Learning and Notes
# grand_parent: 
# has_toc: false
search_exclude: false
last_modified_date: 2024-12-10
---
# How to Analyze a WHEA report
{: .no_toc }

{% include toc.md %}

## What is WHEA?
WHEA stands for **Windows Hardware Error Architecture**. It is a framework in Windows that allows the OS (in this case Windows) handle hardware errors, whether they are caused by faulty firmware or faulty hardware. It has the capability to detect, report and even in some cases recover from hardware malfunctions (an example of which is thoroughly discussed in [how to analyze a CMCI WHEA error](/RTS-Extra-Docs/docs/learning/WHEA-Analysis/WHEA-analysis-02-CMCI_NOTIFY_TYPE_GUID)).

The WHEA was introduced in November 2006 with the release of Windows Vista to properly standardize a unified mechanism to handle hardware errors. Previously Windows used to utilize platform specific mechanisms to detect and report hardware errors, some of which were not even enforced by vendors and thus when those components did fail, the only way to troubleshoot was via [breadboarding](https://rtech.support/factoids/breadboarding/).

## WHEA error analysis
WHEA errors can manifest itself in numerous ways. The way which most people usually encounter a WHEA error (or see it for the first time) usually is in a BSOD event ([Blue Screen of Death](https://en.wikipedia.org/wiki/Blue_screen_of_death)). Such errors occur because the system threw a hardware error so severe, the stability of the system itself is compromised and the OS crashes, presenting the user with a following error screen:

![/RTS-Extra-Docs/assets/img/WHEA_Analysis/BSOD_WHEA.jpg](/RTS-Extra-Docs/assets/img/WHEA_Analysis/BSOD_WHEA.jpg)

Other times, most users may not even be aware that there are WHEA errors being reported by the system until it manifests itself in a different way, such as WiFi intermittently cutting out due to a failing WiFi adaptor, or maybe the GPU glitching and presenting artifacts on screen. Such errors aren't system critical usually (unless they break the driver in such a way which errors out kernel space) and therefore BSODs won't occur to notify the user that a hardware is faulty. The only way to find these errors is by going through Event Viewer, where all non-critical WHEA errors or "corrected" WHEA errors are reported.

![/RTS-Extra-Docs/assets/img/WHEA_Analysis/EventViewer_WHEA.png](/RTS-Extra-Docs/assets/img/WHEA_Analysis/EventViewer_WHEA.png)

For the purposes of this guide, we will be analyzing WHEA errors via a tool known as Specify. Specify is a snapshot viewer, as in it collects data from the system it's running on and then passes all this data to a website, [spec-ify.com](spec-ify.com), which presents data in a structured way allowing users to view the status of their machines, or aid tech support agents in analyzing systems and figuring out what's wrong with them or general checkup.

Notably speaking, it also grabs important logs from Eventviewer particularly, including unsafe shutdowns and **WHEA error reports**, be it PCIe WHEA errors, or general WHEA errors (including ones causing BSODs too). To see these WHEA error logs, simply scroll down to the section that states `WHEA errors`.

{: .note }
> In the case of a WHEA error causing a BSOD, almost all details of the error will usually be within the minidump (.dmp) files generated by the system, in addition to creating a report in Specify. We recommend analyzing both to properly diagnose an issue. To analyze minidumps, please refer to the [BSOD guide](https://rtech.support/learning/bsod_guide/).

### Classifications
WHEA errors can be classified into two catagories:
- **Corrected Errors** - These are hardware errors that the system's hardware or firmware has already corrected by the time the OS is notified. A corrected WHEA error will be reported then.
- **Uncorrected Errors** - These are errors where the system's firmware or hardware cannot correct, and are further classfied into two types:
    - <u>Fatal Errors</u> - These are unrecoverable errors which causes system instability, often resulting in a BSOD.
    - <u>Non-Fatal Errors</u> - These are errors that the OS tries to fix directly (not the firmware/hardware), and if able to, a corrected WHEA report will be written up. If unable, the system will still be able to function without that hardware if the errenous hardware does not affect the stability of the system.

### Types
There are numerous types of WHEA error types, of which the full examples of all different types can be found in [Microsoft documentation](https://learn.microsoft.com/en-us/windows-hardware/drivers/whea/) (good luck). This goes into deep details, but for our purposes, that will serve as further reading.

Instead we will focus on common types of WHEA errors you may encounter, what they can mean, and how you can quickly diagnose them, including further testing for further diagnosis. We will cover the following:
- Processor errors (MCA, CMCI, CMC)
- PCI Express (PCIe) errors
- Memory errors
- Platform Hardware errors (NMI, Firmware, SOC)
- Device Driver errors
- Generic Hardware errors

#### Processor errors (MCA, CMCI, CMC)
These include Machine Check Architecture (MCA) errors, Corrected Machine Check Interrupt (CMCI) errors, and Corrected Machine Checks (CMC), which report CPU internal failures such as cache hierarchy errors or execution errors.

Example error types:
WHEA_PROCESSOR_GENERIC_ERROR_SECTION (CPU generic error)

#### Memory errors
These are detected from system RAM, including corrected and uncorrectable memory errors, single-bit/multi-bit errors, and ECC/parity RAM issues.

Example error types:
WHEA_MEMORY_ERROR_SECTION (Memory error)

#### PCI Express/PCIe errors
These are errors generated by PCI Express endpoints, root ports, or bridges (e.g., Advanced Error Reporting from a PCIe root port or device). They encompass device participation in error conditions, like uncorrectable and corrected errors on PCIe lanes, bridges, or root complex devices.

Example error types:
WHEA_AER_BRIDGE_DESCRIPTOR (PCIe Bridge error)
WHEA_AER_ENDPOINT_DESCRIPTOR (PCIe Endpoint error)
WHEA_AER_ROOTPORT_DESCRIPTOR (PCIe Root Port error)
WHEA_PCIEXPRESS_ERROR_SECTION (PCI Express error)
WHEA_PCIXBUS_ERROR_SECTION (PCI-X or PCI bus error)

#### Platform hardware errors (NMI, Firmware, SOC)
These involve platform-level failures such as System-on-Chip (SoC) errors, non-maskable interrupts (NMI), or errors surfaced by system firmware like UEFI/BIOS.

Example error types:
WHEA_NMI_ERROR_SECTION (Nonmaskable Interrupt error)
WHEA_FIRMWARE_ERROR_RECORD_REFERENCE (Firmware/BIOS error record)

#### Device driver errors
Some WHEA errors can come from hardware-specific device drivers, especially if a driver is capable of reporting hardware error status directly to the OS.

Example error types:
WHEA_DEVICE_DRIVER_DESCRIPTOR (Driver-sourced error)

#### Generic hardware errors
WHEA also provides generic error reporting for types that do not fall into the above categories.

Example error types:
WHEA_GENERIC_ERROR_DESCRIPTOR (Unknown generic hardware error) - God save your soul if you just have this and nothing else to gon on.